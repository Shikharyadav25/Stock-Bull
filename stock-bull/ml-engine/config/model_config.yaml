# Model Configuration for Stock Bull

project:
  name: "stock_bull"
  version: "1.0.0"
  description: "Stock scoring and classification system"

data:
  train_split: 0.70
  val_split: 0.15
  test_split: 0.15
  min_samples_per_stock: 100
  lookback_days: 252  # 1 year of trading days
  prediction_horizon: 30  # Predict 30-day future returns
  
paths:
  data_dir: "../data-pipeline/processed_data"
  output_dir: "./data/processed"
  models_dir: "./models/saved_models"
  logs_dir: "./logs"

preprocessing:
  handle_missing: "forward_fill"  # forward_fill, interpolate, drop
  scaling_method: "robust"  # standard, minmax, robust
  outlier_removal: true
  outlier_threshold: 3.0  # IQR multiplier
  
feature_engineering:
  # Feature selection
  select_features: true
  selection_method: "importance"  # importance, correlation, mutual_info
  max_features: 50
  min_feature_importance: 0.001
  
  # Feature creation
  create_interaction_features: false
  create_polynomial_features: false
  polynomial_degree: 2

labeling:
  # Classification labels based on future returns
  strong_buy_threshold: 15.0   # >15% return
  buy_threshold: 5.0           # 5-15% return
  hold_threshold_low: -5.0     # -5% to 5% return
  sell_threshold: -15.0        # -15% to -5% return
  # Classes: 0=Strong Sell, 1=Sell, 2=Hold, 3=Buy, 4=Strong Buy

models:
  random_forest:
    enabled: true
    n_estimators: 200
    max_depth: 15
    min_samples_split: 10
    min_samples_leaf: 5
    max_features: "sqrt"
    random_state: 42
    n_jobs: -1
    
  xgboost:
    enabled: true
    n_estimators: 200
    max_depth: 10
    learning_rate: 0.05
    subsample: 0.8
    colsample_bytree: 0.8
    objective: "multi:softmax"
    num_class: 5
    random_state: 42
    
  lightgbm:
    enabled: true
    n_estimators: 200
    max_depth: 10
    learning_rate: 0.05
    num_leaves: 31
    subsample: 0.8
    colsample_bytree: 0.8
    objective: "multiclass"
    num_class: 5
    random_state: 42
    
  gradient_boosting:
    enabled: true
    n_estimators: 150
    max_depth: 8
    learning_rate: 0.05
    subsample: 0.8
    random_state: 42
    
  ensemble:
    enabled: true
    voting_type: "soft"  # soft, hard
    weights: [0.3, 0.3, 0.3, 0.1]  # RF, XGB, LGBM, GB

training:
  cross_validation: true
  cv_folds: 5
  use_time_series_split: true  # Important for time series data
  
  # Hyperparameter tuning
  hyperparameter_tuning: false
  tuning_method: "grid"  # grid, random, bayesian
  n_iter: 50  # for random/bayesian search
  
  # Early stopping
  early_stopping: true
  early_stopping_rounds: 50
  
  # Class imbalance handling
  handle_imbalance: true
  balance_method: "smote"  # smote, class_weight, undersample

evaluation:
  metrics:
    - "accuracy"
    - "precision"
    - "recall"
    - "f1_score"
    - "roc_auc"
    - "confusion_matrix"
    - "classification_report"
  
  # Backtesting
  backtest_enabled: true
  backtest_start_date: "2023-01-01"
  
scoring:
  # Final stock score calculation
  weights:
    ml_score: 0.40
    technical_score: 0.25
    sentiment_score: 0.20
    momentum_score: 0.10
    fundamental_score: 0.05

mlflow:
  enabled: true
  tracking_uri: "file:./mlruns"
  experiment_name: "stock_bull_classifier"